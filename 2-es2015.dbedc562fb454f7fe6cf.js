(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"6NiB":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return c}));var r=s("HDdC"),n=s("fXoL");class o{constructor(e){this.url=e,this.websocket=new WebSocket(e),this._state="closed",this._openSubscriptions=new Map,this._errorSubscriptions=new Map,this._messageSubscriptions=new Map,this._closeSubscriptions=new Map,this._openObservable=r.a.create(e=>{this.websocket.addEventListener("open",t=>{this._state="opened",e.next({event:t})})}),this._errorObservable=r.a.create(e=>{this.websocket.addEventListener("error",t=>{console.error("websocket on error"),e.next({event:t})})}),this._messageObservable=r.a.create(e=>{this.websocket.addEventListener("message",t=>{e.next({event:t})})}),this._closeObservable=r.a.create(e=>{this.websocket.addEventListener("close",t=>{this._state="closed",console.warn("websocket closed"),e.next({event:t})})})}on(e,t,s){var r,n=this;return r=void 0===s?1e4*(new Date).valueOf()+Math.round(1e3*Math.random()):s,console.log("id: "+r),"open"===e&&this._openSubscriptions.set(r,this._openObservable.subscribe({next(e){t(e.event.data,n,e.event)},error(e){console.error(e)}})),"error"===e&&this._errorSubscriptions.set(r,this._errorObservable.subscribe({next(e){t(e.event.data,n,e.event)},error(e){console.error(e)}})),"message"===e&&this._messageSubscriptions.set(r,this._messageObservable.subscribe({next(e){t(e.event.data,n,e.event)},error(e){console.error(e)}})),"close"===e&&this._closeSubscriptions.set(r,this._closeObservable.subscribe({next(e){t(e.event.data,n,e.event)},error(e){console.error(e)}})),this}send(e){try{this.websocket.send(e)}catch(t){console.error(t)}return this}get state(){return this._state}cleanAllMessageListener(){return this._messageSubscriptions.forEach(e=>{e.unsubscribe()}),this}clean(e){try{this._messageSubscriptions.get(e).unsubscribe()}catch(t){throw"clean event listener error"}}}let i=(()=>{class e{constructor(){this.sockets=new Map}open(e){if(!this.checkExistence(e)){let t=new o(e);return this.sockets.set(e,t),t}}checkExistence(e){return this.sockets.forEach((t,s)=>{if(t===e)return console.warn("a websocket with same url has existed"),!0}),!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.R)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),c=(()=>{class e{}return e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({factory:function(t){return new(t||e)},imports:[[]]}),e})()},qtYk:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var r=s("ofXK"),n=s("3Pt+"),o=s("TEn/"),i=s("6NiB"),c=s("fXoL");let a=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},imports:[[r.b,n.a,o.w,i.a]]}),e})()}}]);